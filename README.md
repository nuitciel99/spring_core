# Spring AOP & Constructor & IOC & SpEL

- Spring AOP : Aspect Oriented Programming의 약자로 관점 지향 프로그래밍
  어떤 로직을 기준으로 핵심적인 관점, 부가적인 관점으로 나누어서 보고 그 관점을 기준으로 각각 모듈화한 것
  모듈화란 어떤 공통된 로직이나 기능을 하나의 단위로 묶는 것

  핵심적인 관점은 결국 우리가 적용하고자 하는 핵심 비즈니스 로직이 됨. 또한 부가적인 관점은 핵심 로직을 실행하기 위해서 행해지는 데이터베이스 연결, 로깅, 파일 입출력 등을 예로 들 수 있음
  즉, AOP에서 각 관점을 기준으로 로직을 모듈화한다는 것은 코드들을 부분적으로 나누어서 모듈화하겠다는 의미

- AOP 주요 기념

  - Aspect : 위에서 설명한 흩어진 관심사를 모듈화 한 것. 주로 부가기능을 모듈화함.
  - Target : Aspect를 적용하는 곳 (클래스, 메서드 ... )
  - Advice : 실질적으로 어떤 일을 해야할 지에 대한 것, 실질적인 부가기능을 담은 구현체
  - JointPoint : Advice가 적용될 위치, 끼어들 수 있는 지점. 메서드 진입 지점, 생성자 호출 시점, 필드에서 값을 꺼내올 때 등 다양한 시점에 적용가능
  - PointCut : JointPoint의 상세한 스펙을 정의한 것. 'A란 메서드의 진입 시점에 호출할 것'과 같이 더욱 구체적으로 Advice가 실행될 지점을 정할 수 있음

- AOP 특징

  - 프록시 패턴 기반의 AOP 구현체, 프록시 객체를 쓰는 이유는 접근 제어 및 부가기능을 추가하기 위해서임
  - 스프링 빈에만 AOP를 적용 가능
  - 모든 AOP 기능을 제공하는 것이 아닌 스프링 IoC와 연동하여 엔터프라이즈 애플리케이션에서 가장 흔한 문제(중복코드, 프록시 클래스 작성의 번거로움, 객체들 간 관계 복잡도 증가 ...)에 대한 해결책을 지원하는 것이 목적

- IOC : Inversion of Control의 줄임말이며, 제어의 역전이라고 함
  스프링 애플리케이션에서는 오브젝트(빈)의 생성과 의존 관계 설정, 사용, 제거 등의 작업을 애플리케이션 코드 대신 스프링 컨테이너가 담당
  이를 스프링 컨테이너가 코드 대신 오브젝트에 대한 제어권을 갖고 있다고 해서 IoC라고 부름 (IoC 컨테이너)

  스프링에서는 IoC를 담당하는 컨테이너를 빈 팩토리, DI 컨테이너, 애플리케이션 컨텍스트라고 부름
  오브젝트의 생성과 오브젝트 사이의 런타임 관계를 설정하는 DI 관점으로 보면, 컨테이너를 빈 팩토리 또는 DI 컨테이너라고 부름
  DI를 위한 빈 팩토리에 여러 가지 기능을 추가한 것을 애플리케이션 컨텍스트라고 함
  애플리케이션 컨텍스트는 그 자체로 IoC와 DI 그 이상의 기능을 가짐

  IoC 컨테이너의 가장 기초적인 역할을 오브젝트를 생성하고 이를 관리하는 것이다. 스프링 컨테이너가 관리하는 이런 오브젝트는 빈이라 부름.

  - Bean Factory & ApplicationContext
    - 스프링 컨테이너의 최상위 인터페이스
    - 스프링 빈을 관리하고 조회하는 역할을 담당
    - 애플리케이션 컨텍스트(ApplicationContext)는 빈 팩토리 기능을 모두 상속 받아 제공됨
    - 애플리케이션 컨텍스트는 메시지 소스를 활용한 국제화 기능, 환경 변수, 애플리케이션 이벤트, 편리한 리소스 조회

- DL & DI

  - DL : 의존성 검색, 이는 Bean에 접근하기 위해 컨테이너가 제공하는 API를 이용하여 Bean을 Lookup (Dependency Lookup)
  - DI : 의존성 주입, 이는 각 클래스 간의 의존성을 자신이 아닌 외부(컨테이너)에서 주입 (Dependency Injection)
    자바로 프로그래밍을 하면서 객체를 생성할 때 직접 클래스에 new연산자를 이용하여 생성함. 하지만 DI는 개발자가 직접 코딩을 하여 객체를 생성하는 것이 아니라, 컨테이너(IoC)가 이를 생성시켜 주는 것. 그렇게 된다면 코드에서 직접적인 연관관계가 발생하지 않아 각 클래스들의 변경이 자유로워 지는데, 이를 느슨한 결합이라고 함

    각 클래스들간의 결합도가 높게되면 유지보수가 힘들게 됨. 따라서 각 클래스들간의 연관 관계를 클래스 내에서 맺어주는 것이 아니라 스프링 자체에서 설정을 통해 연관 관계를 맺어줌으로써 결합도를 낮춰줌
